webpackJsonp([15],{CCCh:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i("mtWM");var n=i("NFVb"),r=(String,n.default,{props:{id:{type:String}},data:function(){var e=window.localStorage.getItem("userName"),t=window.localStorage.getItem("uid"),i=window.localStorage.getItem("appkey"),n=window.localStorage.getItem("credential"),r=window.localStorage.getItem("friendTouid"),o=window.localStorage.getItem("myId"),a=window.localStorage.getItem("friendNick");return{userName:e,uid:t,appkey:i,credential:n,friendTouid:r,myTouid:this.$route.params.id,myId:o,friendNick:a,avatar:"",toAvatar:""}},components:{aliMit:n.default},mounted:function(){this.myTouid.toString(),this.myId;window.localStorage.setItem("chatId",this.myTouid),document.getElementById("mainnews2").classList.remove("is-hide"),window.hasWKIT||(window.hasWKIT=!0,WKIT.init({container:document.getElementById("mainnews2"),uid:this.uid,appkey:this.appkey,credential:this.credential,touid:this.friendTouid,themeBgColor:"#888",themeColor:"#FC3768",msgBgColor:"#FC3768",msgColor:"#fff",titleBar:!1,onLoginSuccess:this.onLoginSuccess,onLoginError:this.onLoginError,onMsgReceived:this.onMsgReceived,onMsgSent:this.onMsgSent,onBack:this.onBack}),setTimeout(function(){WKIT.resize()},3e3))},methods:{onLoginSuccess:function(){console.log("登录成功")},onLoginError:function(){console.log("登录失败")},onMsgReceived:function(){console.log("收到消息")},onMsgSent:function(){console.log("消息发送")},onBack:function(){document.getElementById("mainnews2").classList.add("is-hide"),this.$router.replace("/message")}}}),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"dialogue"},[t("header",{attrs:{id:"sub-header"}},[t("div",{staticClass:"center"},[t("div",{staticClass:"iconfont icon-fanhui",on:{click:this.onBack}},[t("span",[this._v("返回")])]),this._v(" "),t("span",[this._v(this._s(this.friendNick))])])])])},staticRenderFns:[]};var a=i("VU/8")(r,o,!1,function(e){i("vpCD")},"data-v-2e7f5e92",null);t.default=a.exports},NFVb:function(e,t,i){"use strict";(function(e){var t,n,r,o=i("mvHQ"),a=i.n(o),s=i("pFYg"),c=i.n(s);window.Messenger=function(){function e(e,t){var i="";if(arguments.length<2?i="target error - target and name are both required":"object"!=(void 0===e?"undefined":c()(e))?i="target error - target itself must be window object":"string"!=typeof t&&(i="target error - target name must be string type"),i)throw new Error(i);this.target=e,this.name=t}function t(e,t){this.targets={},this.name=e,this.listenFunc=[],"string"!=typeof(i=t||i)&&(i=i.toString()),this.msgTester=new RegExp("^"+i),this.initListen()}var i="[PROJECT_NAME]",n="postMessage"in window;return e.prototype.send=n?function(e){try{this.target.postMessage(i+e,"*")}catch(e){if(window.__WSDK__POSTMESSAGE__DEBUG__)if("function"==typeof window.__WSDK__POSTMESSAGE__DEBUG__)try{window.__WSDK__POSTMESSAGE__DEBUG__.call(null,e)}catch(e){}else alert("对不起,当前浏览器不支持聊天,请更换浏览器")}}:function(e){var t=window.navigator[i+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(i+e,window)},t.prototype.addTarget=function(t,i){var n=new e(t,i);this.targets[i]=n},t.prototype.initListen=function(){var e=this,t=function(t){if("object"==(void 0===t?"undefined":c()(t))&&t.data&&(t=t.data),e.msgTester.test(t)){t=t.slice(i.length);for(var n=0;n<e.listenFunc.length;n++)e.listenFunc[n](t)}};n?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[i+this.name]=t},t.prototype.listen=function(e){this.listenFunc.push(e)},t.prototype.clear=function(){this.listenFunc=[]},t.prototype.send=function(e){var t,i=this.targets;for(t in i)i.hasOwnProperty(t)&&i[t].send(e)},t}(),function(e){var t,i={},n=window,r=n.document,o="localStorage",s="script";if(i.disabled=!1,i.version="1.3.17",i.set=function(e,t){},i.get=function(e,t){},i.has=function(e){return void 0!==i.get(e)},i.remove=function(e){},i.clear=function(){},i.transact=function(e,t,n){null==n&&(n=t,t=null),null==t&&(t={});var r=i.get(e,t);n(r),i.set(e,r)},i.getAll=function(){},i.forEach=function(){},i.serialize=function(e){return a()(e)},i.deserialize=function(e){if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e||void 0}},function(){try{return o in n&&n[o]}catch(e){return!1}}())t=n[o],i.set=function(e,n){return void 0===n?i.remove(e):(t.setItem(e,i.serialize(n)),n)},i.get=function(e,n){var r=i.deserialize(t.getItem(e));return void 0===r?n:r},i.remove=function(e){t.removeItem(e)},i.clear=function(){t.clear()},i.getAll=function(){var e={};return i.forEach(function(t,i){e[t]=i}),e},i.forEach=function(e){for(var n=0;n<t.length;n++){var r=t.key(n);e(r,i.get(r))}};else if(r.documentElement.addBehavior){var c,l;try{(l=new ActiveXObject("htmlfile")).open(),l.write("<"+s+">document.w=window</"+s+'><iframe src="/favicon.ico"></iframe>'),l.close(),c=l.w.frames[0].document,t=c.createElement("div")}catch(e){t=r.createElement("div"),c=r.body}var d=function(e){return function(){var n=Array.prototype.slice.call(arguments,0);n.unshift(t),c.appendChild(t),t.addBehavior("#default#userData"),t.load(o);var r=e.apply(i,n);return c.removeChild(t),r}},u=new RegExp("[!\"#$%&'()*+,/\\\\:;<=>?@[\\]^`{|}~]","g"),m=function(e){return e.replace(/^d/,"___$&").replace(u,"___")};i.set=d(function(e,t,n){return t=m(t),void 0===n?i.remove(t):(e.setAttribute(t,i.serialize(n)),e.save(o),n)}),i.get=d(function(e,t,n){t=m(t);var r=i.deserialize(e.getAttribute(t));return void 0===r?n:r}),i.remove=d(function(e,t){t=m(t),e.removeAttribute(t),e.save(o)}),i.clear=d(function(e){var t=e.XMLDocument.documentElement.attributes;for(e.load(o);t.length;)e.removeAttribute(t[0].name);e.save(o)}),i.getAll=function(e){var t={};return i.forEach(function(e,i){t[e]=i}),t},i.forEach=d(function(e,t){for(var n,r=e.XMLDocument.documentElement.attributes,o=0;n=r[o];++o)t(n.name,i.deserialize(e.getAttribute(n.name)))})}try{var g="__storejs__";i.set(g,g),i.get(g)!=g&&(i.disabled=!0),i.remove(g)}catch(e){i.disabled=!0}i.enabled=!i.disabled,e.store=i}(this),t=this,n=location.protocol+"//",r=location.host,t.WSDKCons={PROJECT_NAME:"WSDK",CUSTOM_PAGE:"CUSTOM_PAGE",PROXY_PAGE:"PROXY_PAGE",UPLOAD_PAGE:"UPLOAD_PAGE",ERROR_PROXY_PAGE:"ERROR_PAGE",PROXY_URL:"https://chat.etao.com/proxy.htm",LOGIN_URL:"https://chat.etao.com/login/oauth",TB_LOGIN_URL:"https://chat.im.taobao.com/taobaoLogin/taobao_oauth",GET_USER_STATUS_URL:"https://amos.alicdn.com/mullidstatus.aw",UPLOAD_URL:"https://mobileim.etao.com/api/file/uploadFile.json",UPLOAD_SUCCESS_PROXY:"https://chat.etao.com/uploadproxy.htm",GET_APP_INFO_URL:"http://tcms-openim.wangxin.taobao.com/getprefix",DEFAULT_LOGIN_TIMEOUT:5e3,DEFAULT_UPLOAD_TIMEOUT:3e4,CODE:{1000:"SUCCESS",1001:"NOT_LOGIN",1002:"TIMEOUT",1003:"OTHER_ERROR",1004:"PARSE_ERROR",1005:"NET_ERROR",1006:"KICK_OFF",1007:"LOGIN_INFO_ERROR",1008:"ALREADY_LOGIN",1009:"NO_MESSAGE",1010:"PARAM_ERROR",1011:"LOGIN_TOO_QUICK_FROM_SERVER",1012:"LOGIN_ALREADY_FROM_SERVER",1013:"NOT_EXIST_USER",1014:"ERROR_PASSWORD",1015:"UIC ERROR"},MAX_IMAGE_SIZE:5242880,PROXY_ACTION_API:{recvMsg:n+r+"/msg/msg_recv",sendMsg:n+r+"/msg/send",roamMsg:n+r+"/msg/roaming",listen:n+r+"/msg/msg_listen",unreadMsg:n+r+"/msg/readtimes",recentContact:n+r+"/msg/recent",recentContactNew:n+r+"/msg/recentExt",setReadState:n+r+"/msg/setReadState",getRealCid:n+"amos.alicdn.com/getRealCid.aw",tribe:n+r+"/msg/tribe",getUserStatus:n+"amos.alicdn.com/mullidstatus.aw",uploadToken:n+r+"/msg/getToken",loginOut:n+r+"/msg/ImReqLogoff",getAnonymous:"https://chat.etao.com/openim/getanonymous"},UPLOAD_ERRORS:{"-1":"PARAM ERROR","-2":"EMPTY FILE","-3":"NOT SUPPORT","-4":"SIZE LIMIT","-5":"CAN NOT LOAD IMAGE","-6":"TIME OUT","-7":"UPLOAD FAIL","-8":"GET TOKEN ERROR"}},function(e){window.console&&window.console.log||(window.console={log:function(){}});var t=e.WSDKUtil||(e.WSDKUtil={});Array.prototype.forEach||(Array.prototype.forEach=function(e){if(!e)return!1;for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});["String","Array","Object","Function","Number","Boolean","Date","RegExp"," Null","Undefined","NaN","Arguments"].forEach(function(e){t["is"+e]=function(t){return function(e){return Object.prototype.toString.call(e)}(t)==="[object "+e+"]"}});var i=new RegExp("(http[s]{0,1}|ftp)://[a-zA-Z0-9\\.\\-]+\\.([a-zA-Z]{2,4})(:\\d+)?(/[a-zA-Z0-9\\.\\-~!@#$%^&*+?:_/=<>]*)?","gi"),n={};t.Event={on:function(e,i,r,o){if("function"==typeof i){if(o){var a=e,s=i;i=function(){t.Event.off(a,i,r),s.apply(this,arguments)}}return(e=e.split(/\s+/)).forEach(function(e){(n[e]||(n[e]=[])).push({callback:i,context:r||this})}),this}},one:function(e,i,n){return t.Event.on(e,i,n,1)},off:function(e,t){return e||t?((e=e.split(/\s+/)).forEach(function(e){var i=n[e];if(!i)return this;if(!t)return delete n[e],this;for(var r=0,o=i.length;o>r;r++)if(t===i[r].callback){i.splice(r,1);break}}),this):(n={},this)},fire:function(e,t){return arguments.length?((e=e.split(/\s+/)).forEach(function(e){var i=n[e];return i?void i.forEach(function(e){e.callback.call(e.context,t)}):this}),this):this}},t.extend=function(e){for(var t,i=e||{},n=e?1:0,r=arguments.length;r>n;n++)for(t in arguments[n])if(arguments[n].hasOwnProperty(t)){var o=arguments[n][t];""!==o&&null!==o&&void 0!==o&&(i[t]=o)}return i},t.checkParam=function(e,t){var i="param lost:",n=!1;if(e?t.forEach(function(t){void 0===e[t]&&(i+=t+";",n=!0)}):(i+="param",n=!0),n)throw new Error(i);return e.uid&&(e.uid=e.uid.toLowerCase()),e.touid&&(e.touid=e.touid.toLowerCase()),!0},t.callbackHandler=function(e,i){i&&(i.success||i.error)&&t.Event.one(e,function(e){e&&1e3===e.code?i.success&&i.success.call(null,e):i.error&&i.error.call(null,e)})},t.getScript=function(t,i,n,r){var o,a=document.createElement("script"),s=document.getElementsByTagName("head")[0],c=function(){o&&clearTimeout(o),i&&i()};e.addEventListener?a.addEventListener("load",function(){c()},!1):a.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&(a.onreadystatechange=null,c())},a.src=t,s.insertBefore(a,s.firstChild),o=setTimeout(function(){n&&n()},r||3e3)},t.htmlEncode=function(e){return(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/>/g,"&gt;")).replace(/</g,"&lt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;")};t.jsonp=function(t,i,n,r){var o=+new Date,a=document.createElement("script"),s=document.getElementsByTagName("head")[0],c="wsdk_"+o,l=null;r&&a.setAttribute("charset",r),a.type="text/javascript",a.id=c,e[c]=function(t){try{var n=document.getElementById(c);l&&clearTimeout(l),n&&n.parentNode.removeChild(n),delete e[c],i&&i.call(null,t)}catch(e){}},t+=(t.indexOf("?")>-1?"&":"?")+"callback="+c,s.insertBefore(a,s.firstChild),a.src=t,l=setTimeout(function(){n&&n.call(null,{code:1002,resultText:"TIMEOUT"})},4e3)},t.param=function(e){var t="";if(e){for(var i in e)t+="&"+i+"="+encodeURIComponent(e[i]);t=t.substr(1)}return t},t.unparam=function(e){var t={};if(e)for(var i=0,n=(e=e.split("&")).length;n>i;i++){var r=e[i].split("=");try{t[r[0]]=decodeURIComponent(r[1])}catch(e){t[r[0]]=r[1]}}return t},t.getRealMsgAndType=function(e,i,n){var r=e[n],o=[];if(4!=i)if(t.isArray(r)&&r.length){var a="",s="";r.forEach(function(e,n){a="","P"===e[0]||0===e[1].indexOf("http://interface.im")||0===e[1].indexOf("https://interface.im")||0===e[1].indexOf("http://mobileim.im")||0===e[1].indexOf("https://mobileim.etao")?(a=e[1],i=t.unparam(a.split("?")[1]).type||1,a=/^https:/.test(a)?a.replace("https://interface.im.taobao","https://mobileim.etao"):a.replace("http://interface.im.taobao","http://mobileim.etao"),i=parseInt(i)):"T"===e[0]&&(a=e[1]),r[n+1]&&"Z"===r[n+1][0]&&(s=r[n+1][1]),a.trim()&&o.unshift({type:i,msg:a,extInfo:s})})}else o.push({type:i,msg:r});else i=66,o.push({type:i,msg:r});return o},t.urlReplacer=function(e){return e.replace(i,function(e){return 0==e.indexOf("https://g.alicdn.com/aliww/h5-openim/0.0.1/faces/")?e:'<a href="'+e+'" target="_blank">'+e+"</a>"})};var r=(new Date).getTimezoneOffset()/60;t.dateFormatter=function(e){var t,i,n,o,a,s,c=new Date(e),l=new Date,d=+c,u=+l-(+l-36e5*r)%864e5;return t=c.getFullYear(),i=this.numFormatter(c.getMonth()+1),n=this.numFormatter(c.getDate()),o=this.numFormatter(c.getHours()),a=this.numFormatter(c.getMinutes()),s=this.numFormatter(c.getSeconds()),l.getFullYear()==t?d>=u&&u+864e5>d?"今天 "+o+":"+a+":"+s:i+"-"+n+" "+o+":"+a+":"+s:t+"-"+i+"-"+n+" "+o+":"+a+":"+s},t.numFormatter=function(e){return(e=parseInt(e))>9?e:"0"+e},t.addClass=function(e,t){return e&&t?(t=t.trim(),e.classList?t.split(/\s+/).forEach(function(t){e.classList.add(t)}):this.hasClass(e,t)||(e.className+=" "+t),this):this},t.ajax=function(e){var t=null;try{t=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){try{(t=new XMLHttpRequest).overrideMimeType&&t.overrideMimeType("text/xml")}catch(e){alert("您的浏览器不支持Ajax")}}}var i=(e.method||"GET").toUpperCase(),n=Math.random();if("object"==c()(e.data)){var r="";for(var o in e.data)r+=o+"="+e.data[o]+"&";e.data=r.replace(/&$/,"")}"GET"==i?(e.data?t.open("GET",e.url+"?"+e.data,!0):t.open("GET",e.url+"?t="+n,!0),t.send()):"POST"==i&&(t.open("POST",e.url,!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.send(e.data)),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.success&&e.success(t.responseText):e.error&&e.error(t.status))}}}(this),function(e){function t(e){this.init(e)}var i=e.WSDKUtil,n=e.WSDKCons,r=i.Event,o=n.UPLOAD_PAGE,a=n.MAX_IMAGE_SIZE,s=n.DEFAULT_UPLOAD_TIMEOUT,c="WSDK_FRAME",l=n.UPLOAD_URL,d=n.UPLOAD_SUCCESS_PROXY,u={wx_web_token:"",user_id:"",mimetype:"",base64ed_file_data:"",redirect_url:d,type:1,msgType:0,receiver_id:"",message_id:"",width:"",height:"",mediaSize:""},m=n.UPLOAD_ERRORS;!e.WSDKPlgs&&(e.WSDKPlgs={}),t.prototype={constructor:t,__IsTokenFetching:!1,__Token:"",init:function(e){this.Base=e.Base,e.isDaily&&(l="http://interface.im.daily.taobao.net/api/file/uploadFile.json",d="http://chat.im.daily.taobao.net/uploadproxy.htm",u.redirect_url=d),this.messengerSender=e.Base.messengerSender,this.Messenger=e.__Messenger,this.__events()},upload:function(e){i.checkParam(e,["base64Str","ext","success"]),!e.error&&(e.error=function(){}),(!e.maxSize||e.maxSize>a)&&(e.maxSize=a),!e.type&&(e.type=1),this.param=e,this.upBase64(e)},__events:function(){var e=this;r.on("GET_UPLOAD_TOKEN",function(t){e.__IsTokenFetching=!1,1e3===t.code?(e.__Token=t.data.token,e.onGetUpTokenSuccess(),setTimeout(function(){e.__Token=""},parseInt(t.data.expire)/3*2*1e3)):e.onGetUpTokenError()}),r.on("UPLOAD_IMAGE",function(t){e.timeout&&clearTimeout(e.timeout),e.timoeut=null,1e3==t.code?e.uploadSuccess(t):e.uploadError(t)})},getUpToken:function(){this.__IsTokenFetching||(this.__IsTokenFetching=!0,this.__Token?this.onGetUpTokenSuccess():this.messengerSender.call(this.Base,{action:"GET_UPLOAD_TOKEN"},!0))},upBase64:function(){var e=this.param.base64Str;return e=e.substring(e.indexOf(",")+1),this.param.base64StrForUpload=e,e.length>this.param.maxSize?this.param.error({code:-4,errorText:m[-4]}):void this.getUpToken()},onGetUpTokenSuccess:function(){this.__IsTokenFetching=!1,u.wx_web_token=this.__Token,u.base64ed_file_data=this.param.base64StrForUpload,u.mimetype=this.param.ext,u.user_id=this.Base.LoginInfo.prefix+this.Base.LoginInfo.uid,u.type=this.param.type;var e=this,t=+new Date;this.form=function(e,t,i){var n=document.createElement("form"),r="";for(var o in n.action=l,n.method="post",n.enctype="multipart/form-data",n.name=i,n.target=t,n.style.display="none",n.acceptCharset="UTF-8",e)r+='<input type="hidden" name="'+o+'" value="'+e[o]+'" />';return n.innerHTML=r,document.body.appendChild(n),n}(u,c+t,"WSDK_FORM"+t),this.frame=function(e){var t;try{t=document.createElement('<iframe name="'+e+'">')}catch(e){t=document.createElement("iframe")}return t.name=e,t.style.display="none",document.body.appendChild(t),t}(c+t),this.timeout=setTimeout(function(){e.param.error&&e.param.error({code:-3,errorText:m[-3]}),e.__Token="",e.clear()},this.param.timeout||s),this.Messenger.addTarget(this.frame.contentWindow,o),this.form.submit()},uploadSuccess:function(e){this.param.success&&this.param.success({code:1e3,resultCode:"SUCCESS",data:{url:e.data,base64Str:this.param.base64Str}}),this.clear()},uploadError:function(e){this.param.error&&this.param.error({code:-7,errorText:m[-7]+" "+e.resultText}),this.__Token="",this.clear()},clear:function(){this.form&&this.form.parentNode.removeChild(this.form),this.frame&&this.frame.parentNode.removeChild(this.frame),this.form=null,this.frame=null},onGetUpTokenError:function(){this.param.error&&this.param.error({code:-8,errorText:m[-8]})}},e.WSDKPlgs.Uploader=t}(this),function(e){function t(e){this.init(e)}var i=e.WSDKUtil,n=e.WSDKCons.UPLOAD_ERRORS;!e.WSDKPlgs&&(e.WSDKPlgs={}),t.prototype={constructor:t,init:function(e){this.Uploader=e.Plugin.Uploader},upload:function(e){i.checkParam(e,["success"]),!e.error&&(e.error=function(){});var t=e.error;this.param=e,e.target?this.upTarget(e):e.base64Img&&e.ext?this.upBase64(e):t({code:-1,errorText:n[-1]})},upTarget:function(){var e=this.param,t=e.target.files,i=e.target.value;if(!i)return e.error({code:-2,errorText:n[-3]});if(!this.isSupport()||!t||!t[0])return e.error({code:-3,errorText:n[-3]});var r=t[0],o=r.size,a=i.split("."),s=a[a.length-1];if(o>e.maxSize)return e.error({code:-4,errorText:n[-4]});var c=this;this.getImageWH(r,function(e){var t=c.getImageBase64(e,s);c.param.base64Img=t,c.param.ext=s,c.upBase64()},function(){e.error({code:-5,errorText:n[-5]})})},upBase64:function(){var e=this,t=this.param.base64Img;return t.length>this.param.maxSize?this.param.error({code:-4,errorText:n[-4]}):void this.Uploader.upload({base64Str:t,ext:this.param.ext,type:1,timeout:this.param.timeout,maxSize:this.param.maxSize,success:function(t){e.param.success&&e.param.success({code:1e3,resultCode:"SUCCESS",data:{url:t.data.url,base64Str:t.data.base64Str}})},error:function(t){e.param.error&&e.param.error(t)}})},getImageWH:function(t,i,r){try{var o=(e.URL||e.webkitURL).createObjectURL(t),a=new Image;a.onload=function(){i&&i(this),a.onload=a.onerror=null},a.onerror=function(){r&&r(),a.onload=a.onerror=null},a.src=o}catch(e){return this.param.error({code:-3,errorText:n[-3]})}},getType:function(e){return"png"==(e=e.toLowerCase())?"image/png":"image/jpeg"},getImageBase64:function(e,t){var i="";try{var r=document.createElement("canvas"),o=r.getContext("2d");r.width=e.width,r.height=e.height,o.drawImage(e,0,0,e.width,e.height),i=r.toDataURL(this.getType(t),1)}catch(e){this.param.error({code:-3,errorText:n[-3]})}return i},isSupport:function(){return!!document.createElement("canvas").getContext}},e.WSDKPlgs.ImgUp=t}(this),function(e){function t(){this.init()}function i(e){return(e=e.replace(/\[([A-Z\u4e00-\u9fa5]{1,20}?)\]/gi,"@#[$1]@#")).split("@#")}function n(e){return/\[([A-Z\u4e00-\u9fa5]{1,20}?)\]/gi.test(e)}function r(e){for(var t=e.replace("[","").replace("]",""),i=null,n=0,r=c.length;r>n;n++)if(c[n].title==t){i=c[n];break}return i}function o(e){return r(e).code}var a=e.WSDKUtil,s=["加油","色情狂","委屈","悲泣","飞机","生病","不会吧","痛哭","怀疑","花痴","偷笑","握手","玫瑰","享受","对不起","感冒","凄凉","困了","尴尬","生气","残花","电话","害羞","流口水","皱眉","鼓掌","迷惑","忧伤","时钟","大笑","邪恶","单挑","大哭","隐形人","CS","I服了U","欠扁","炸弹","惊声尖叫","微笑","钱","购物","好累","嘘","成交","红唇","招财猫","抱抱","好主意","很晚了","收邮件","举杯庆祝","疑问","惊讶","露齿笑","天使","呼叫","闭嘴","小样","跳舞","无奈","查找","大怒","算帐","爱慕","再见","恭喜发财","强","胜利","财迷","思考","晕","流汗","爱心","摇头","背","没钱了","惊愕","小二","支付宝","鄙视你","吐舌头","鬼脸","财神","等待","傻笑","学习雷锋","心碎","吐","漂亮MM","亲亲","飞吻","帅哥","礼物","无聊","呆若木鸡","再见","老大","安慰"],c=[{title:"加油",img:"10",code:"/:012"},{title:"色情狂",img:"26",code:"/:015"},{title:"委屈",img:"47",code:"/:>_<"},{title:"悲泣",img:"48",code:"/:018"},{title:"飞机",img:"97",code:"/:plane"},{title:"生病",img:"56",code:"/:>M<"},{title:"不会吧",img:"40",code:"/:816"},{title:"痛哭",img:"50",code:"/:020"},{title:"怀疑",img:"33",code:"/:817"},{title:"花痴",img:"14",code:"/:814"},{title:"偷笑",img:"3",code:"/:815"},{title:"握手",img:"82",code:"/:)-("},{title:"玫瑰",img:"84",code:"/:-F"},{title:"享受",img:"25",code:"/:818"},{title:"对不起",img:"52",code:"/:819"},{title:"感冒",img:"37",code:"/:028"},{title:"凄凉",img:"43",code:"/:027"},{title:"困了",img:"44",code:"/:(Zz...)"},{title:"尴尬",img:"38",code:"/:026"},{title:"生气",img:"65",code:"/:>W<"},{title:"残花",img:"85",code:"/:-W"},{title:"电话",img:"92",code:"/:~B"},{title:"害羞",img:"1",code:"/:^$^"},{title:"流口水",img:"24",code:"/:813"},{title:"皱眉",img:"54",code:"/:812"},{title:"鼓掌",img:"81",code:"/:8*8"},{title:"迷惑",img:"29",code:"/:811"},{title:"忧伤",img:"46",code:"/:810"},{title:"时钟",img:"94",code:"/:clock"},{title:"大笑",img:"5",code:"/:^O^"},{title:"邪恶",img:"71",code:"/:036"},{title:"单挑",img:"72",code:"/:039"},{title:"大哭",img:"49",code:"/:>O<"},{title:"隐形人",img:"74",code:"/:046"},{title:"CS",img:"73",code:"/:045"},{title:"I服了U",img:"51",code:"/:044"},{title:"欠扁",img:"62",code:"/:043"},{title:"炸弹",img:"75",code:"/:048"},{title:"惊声尖叫",img:"76",code:"/:047"},{title:"微笑",img:"0",code:"/:^_^"},{title:"钱",img:"88",code:"/:$"},{title:"购物",img:"89",code:"/:%"},{title:"好累",img:"55",code:'/:"'},{title:"嘘",img:"34",code:"/:!"},{title:"成交",img:"80",code:"/:(OK)"},{title:"红唇",img:"83",code:"/:lip"},{title:"招财猫",img:"79",code:"/:052"},{title:"抱抱",img:"9",code:"/:H"},{title:"好主意",img:"20",code:"/:071"},{title:"很晚了",img:"96",code:"/:C"},{title:"收邮件",img:"91",code:"/:@"},{title:"举杯庆祝",img:"93",code:"/:U*U"},{title:"疑问",img:"30",code:"/:?"},{title:"惊讶",img:"59",code:"/:069"},{title:"露齿笑",img:"15",code:"/:^W^"},{title:"天使",img:"22",code:"/:065"},{title:"呼叫",img:"17",code:"/:066"},{title:"闭嘴",img:"61",code:"/:067"},{title:"小样",img:"35",code:"/:068"},{title:"跳舞",img:"6",code:"/:081"},{title:"无奈",img:"41",code:'/:\'""'},{title:"查找",img:"16",code:"/:080"},{title:"大怒",img:"64",code:"/:808"},{title:"算帐",img:"18",code:"/:807"},{title:"爱慕",img:"4",code:"/:809"},{title:"再见",img:"23",code:"/:804"},{title:"恭喜发财",img:"68",code:"/:803"},{title:"强",img:"12",code:"/:b"},{title:"胜利",img:"11",code:"/:806"},{title:"财迷",img:"19",code:"/:805"},{title:"思考",img:"28",code:"/:801"},{title:"晕",img:"45",code:"/:*&*"},{title:"流汗",img:"42",code:"/:802"},{title:"爱心",img:"86",code:"/:Y"},{title:"摇头",img:"36",code:"/:079"},{title:"背",img:"58",code:"/:076"},{title:"没钱了",img:"31",code:"/:077"},{title:"老大",img:"70",code:"/:O=O"},{title:"小二",img:"69",code:"/:074"},{title:"支付宝",img:"98",code:"/:075"},{title:"鄙视你",img:"63",code:"/:P"},{title:"吐舌头",img:"2",code:"/:Q"},{title:"鬼脸",img:"21",code:"/:072"},{title:"财神",img:"66",code:"/:073"},{title:"等待",img:"95",code:"/:R"},{title:"傻笑",img:"39",code:"/:007"},{title:"学习雷锋",img:"67",code:"/:008"},{title:"心碎",img:"87",code:"/:qp"},{title:"吐",img:"57",code:"/:>@<"},{title:"漂亮MM",img:"77",code:"/:girl"},{title:"亲亲",img:"13",code:"/:^x^"},{title:"飞吻",img:"7",code:"/:087"},{title:"帅哥",img:"78",code:"/:man"},{title:"礼物",img:"90",code:"/:(&)"},{title:"无聊",img:"32",code:"/:083"},{title:"呆若木鸡",img:"27",code:"/:084"},{title:"再见",img:"53",code:"/:085"},{title:"惊愕",img:"60",code:"/:O"},{title:"安慰",img:"8",code:"/:086"}],l="https://gw.alicdn.com/tps/TB1.eFIKXXXXXbUXFXXXXXXXXXX-320-675.jpg",d="https://img.alicdn.com/tps/TB1O2CKHVXXXXbMXVXXXXXXXXXX.jpg",u={trigger:!0,emots:s,emotsImg:l,emotSize:45,row:7,col:3,customStyle:!1,onEmotClick:function(){}};!e.WSDKPlgs&&(e.WSDKPlgs={}),t.prototype={constructor:t,emotTitles:s,emotW640:d,emotW320:l,init:function(){},render:function(t){a.checkParam(t,["container"]);var i=a.extend({},u,t),n="",r="",o=0,s=i.row*i.col,c=i.row*i.emotSize,l=i.emotSize*i.col,m=i.emotsImg==d?2:0,g=document.createElement("div");if(function(e,t,i){var n=t*i,r=[],o=0,a=0;return e.forEach(function(e){o==n&&(o=0),0==o&&(r[a++]=[]),n>o&&(o++,r[a-1].push(e))}),r}(i.emots,i.col,i.row).forEach(function(e,t){emotWrapItemStyle=i.customStyle?"":'style="display:'+(0==t?"block":"none")+";background:url("+i.emotsImg+") no-repeat 0 -"+t*(l-m)+"px;width:"+c+"px;height:"+l+"px;"+(m?"background-size:100%;":"")+'"',emotItemStyle=i.customStyle?"":'style="display:block;float:left;cursor:pointer;width:'+i.emotSize+"px;height:"+i.emotSize+'px;"',n+='<div class="wsdk-emot-wrap" '+emotWrapItemStyle+">",i.trigger&&(r+='<i class="wsdk-emot-trigger-item'+(0==t?" wsdk-active":"")+'" data-index="'+t+'"></i>'),e.forEach(function(e,i){n+='<span title="'+e+'" data-index="'+(i+t*s)+'" '+emotItemStyle+"></span>"}),n+="</div>"}),g.innerHTML=n,i.customStyle||(g.style.width=c+"px",g.style.height=l+"px",g.style.overflow="hidden"),g.className="wsdk-emot-con",i.container.appendChild(g),i.trigger){var h=document.createElement("div");h.innerHTML=r,h.className="wsdk-emot-trigger",i.container.appendChild(h);var f=h.getElementsByTagName("i")}var p=g.getElementsByTagName("div"),_=function(t){var n=(t=t||e.event).target||t.srcElement;n&&"SPAN"==n.tagName.toUpperCase()&&i.onEmotClick("["+n.title+"]")},E=function(t){var i=(t=t||e.event).target||t.srcElement;if(i&&"I"==i.tagName.toUpperCase()){var n=i.getAttribute("data-index");if(n==o)return;p[o].style.display="none",p[n].style.display="block",f[o].className="wsdk-emot-trigger-item",f[n].className="wsdk-emot-trigger-item wsdk-active",o=n}};e.addEventListener?(g.addEventListener("click",_,!1),i.trigger&&h.addEventListener("mouseover",E,!1)):e.attachEvent&&(g.attachEvent("onclick",_),i.trigger&&h.attachEvent("onmouseover",E))},encode:function(e){var t,r="";return(e=i(e)).forEach(function(e){r+=n(e)&&(t=o(e))?t:e}),r},htmlEncode:function(e){var t,r="";return(e=i(e)).forEach(function(e){r+=n(e)&&(t=o(e))?t:a.htmlEncode(e)}),r},htmlDecode:function(e){var t,o,s="";return(e=i(e)).forEach(function(e){n(e)&&(t=r(e))?(o=parseInt(t.img)+1,s+='<img class="wsdk-emot" src="https://g.alicdn.com/aliww/h5-openim/0.0.1/faces/'+(o="s0"+(o=10>o?"0"+o:o)+".png")+'" alt="'+t.title+'" />'):s+=a.htmlEncode(e)}),s},decode:function(){var e="",t=c.length;return c.forEach(function(t){e+="|"+t.code.substring(2)}),e=(e=e.substring(1)).replace(/([\^?()\.\*\$])/g,"\\$1"),e=new RegExp("/:("+e+")","g"),function(i){return i&&(i=i.replace(e,function(e){for(var i=!1,n="",r=0;t>r;r++)if(c[r].code==e){i=c[r].img,n=c[r].title;break}return i&&(e="["+n+"]"),e})),this.htmlDecode(i)}}(),isEmot:o,isEmotLike:n,splitByEmot:i},e.WSDKPlgs.Emot=t}(this),function(e){function t(e,t){this.init(e,t)}function i(e,t,i,o){n(t.frameObj);var a,s,d={__ProxyFrame:null,__ProxyForm:null,__ProxyFrameLoadTimeOut:null,__ProxyFrameCallback:function(){i&&(i.__IsProxyFrameLoad=!0,i.__setLoginInfo.call(i))}},m=t.timeout;delete t.timeout,delete t.frameObj;try{a=document.createElement('<iframe name="WSDK_FRAME">')}catch(e){a=document.createElement("iframe")}if(a.style.display="none",a.name="WSDK_FRAME",document.body.appendChild(a),d.__ProxyFrameLoadTimeOut=setTimeout(function(){d.__ProxyFrameLoadTimeOut=null,c.fire("LOGIN",{code:1002,resultText:l[1002]})},m),a.attachEvent?a.attachEvent("onload",d.__ProxyFrameCallback):a.onload=d.__ProxyFrameCallback,d.__ProxyFrame=a,a)try{i.context.__Messenger.addTarget(a.contentWindow,u)}catch(e){}return i.context.__Messenger.listen(function(e){!function(e){e=JSON.parse(e),c.fire(e.action,e.result),e.result&&1e3==e.result.code&&("CHAT_START_RECEIVE_MSG"===e.action?(c.fire("MSG_RECEIVED",e.result),16908304==e.result.data.cmdid&&c.fire("CHAT.MSG_RECEIVED",e.result)):"START_RECEIVE_ALL_MSG"===e.action&&(c.fire("MSG_RECEIVED",e.result),16908304==e.result.data.cmdid?c.fire("CHAT.MSG_RECEIVED",e.result):16908545==e.result.data.cmdid&&c.fire("TRIBE.MSG_RECEIVED",e.result)))}(e)}),o&&"POST"!=o.toUpperCase()?(e+="?"+r.param(t),a.src=e):s=function(e,t){var i=document.createElement("form"),n="";for(var r in t)n+='<input type="hidden" name="'+r+'" value="'+t[r]+'" />';return i.action=e,i.target="WSDK_FRAME",i.method="post",i.innerHTML=n,i.style.display="none",document.body.appendChild(i),i.submit(),i}(e,t),d.__ProxyForm=s,d}function n(e){e&&(e.__ProxyFrame&&(e.__ProxyFrame.detachEvent?e.__ProxyFrame.detachEvent("onload",e.__ProxyFrameCallback):e.__ProxyFrame.onload=null,e.__ProxyFrame.parentNode.removeChild(e.__ProxyFrame),clearTimeout(e.__ProxyFrameLoadTimeOut),e.__ProxyFrameLoadTimeOut=null,e.__ProxyFrame=null),e.__ProxyForm&&(e.__ProxyForm.parentNode.removeChild(e.__ProxyForm),e.__ProxyForm=null))}var r=e.WSDKUtil,o=e.WSDKCons,s=o.PROXY_ACTION_API,c=r.Event,l=o.CODE,d=o.DEFAULT_LOGIN_TIMEOUT,u=o.PROXY_PAGE,m=o.LOGIN_URL;o.PROXY_URL;!e.WSDKMods&&(e.WSDKMods={}),t.prototype={constructor:t,init:function(e,t){t&&t.debug&&"daily"===t.env&&(m="http://chat.im.daily.taobao.net:7001/login/oauth","http://chat.im.daily.taobao.net:7001/proxy.htm",e.isDaily=!0),this.context=e,this.__events()},__events:function(){var e=this;c.on("SET_LOGIN_INFO",function(t){e.frameObj&&e.frameObj.__ProxyFrameLoadTimeOut&&(clearTimeout(e.frameObj.__ProxyFrameLoadTimeOut),e.__IsLogin=!0,e.LoginInfo.prefix=t.data.prefix,e.LoginInfo.toPrefix=t.data.toPrefix,e.context.LoginInfo=e.LoginInfo,c.fire("LOGIN",{code:1e3,resultText:l[1e3]}))}),c.on("KICK_OFF_INSIDE",function(){e.__IsLogin=!1})},login:function(e){if(this.context&&this.context.__Messenger&&this.context.__Messenger.clear(),e.anonymous){var t=this,i=!1;if(r.checkParam(e,["anonymous","appkey"]),store&&store.get("anonymous"))try{var n=JSON.parse(store.get("anonymous"));n.appkey===e.appkey&&n.uid&&n.pwd&&(e.uid=n.uid.substring(8),e.credential=n.pwd,e.tokenFlag=67,i=!0,t._login(e))}catch(e){}if(i)return;r.ajax({url:s.getAnonymous,method:"POST",data:{appkey:e.appkey,deviceinfo:"{}"},success:function(i){if(i)try{if((i=JSON.parse(i)).userid&&i.password){try{store.set("anonymous",a()({appkey:e.appkey,uid:i.userid,pwd:i.password}))}catch(e){}e.uid=i.userid.substring(8),e.credential=i.password,e.tokenFlag=67,t._login(e)}else e.error&&e.error({code:1003,resultText:"获取匿名账号失败"})}catch(t){e.error&&e.error({code:1004,resultText:l[1004]})}else e.error&&e.error({code:1003,resultText:"获取匿名账号失败"})},error:function(t){console.log(t),e.error&&e.error({code:1005,resultText:l[1005]})}})}else r.checkParam(e,["uid","appkey","credential"]),this._login(e)},_login:function(e){r.checkParam(e,["uid","appkey","credential"]);var t=this,n=e.uid,o=e.appkey,a=e.toAppkey||o,s=e.credential,u=void 0===e.tokenFlag?64:e.tokenFlag,g=e.timeout||d,h=e.error||function(){};if(e.error=function(e){t.__IsLogin=!1,clearTimeout(t.frameObj&&t.frameObj.__ProxyFrameLoadTimeOut),h(e)},r.callbackHandler("LOGIN",e),!this.__IsLogin){this.LoginInfo={uid:n,appkey:o,toAppkey:a,credential:s,tokenFlag:u};var f={cross:!0,tokenFlag:u,uid:n,credential:s,appkey:o,toAppkey:a,ver:WSDK.version,lpath:"yw",timeout:g,frameObj:t.frameObj};createMethod="POST";try{t.frameObj=i(m,f,t,createMethod)}catch(e){}return this}c.fire("LOGIN",{code:1008,resultText:l[1008]})},logout:function(e){var t=this,i=e.success;return e.success=function(e){t.__IsLogin=!1,t.destroy(),i&&i(e)},r.callbackHandler("LOGOUT",e),this.messengerSender({action:"LOGOUT",result:{}},!0),this},messengerSender:function(e,t){t&&!this.__IsLogin?c.fire(e.action,{code:1001,resultText:l[1001]}):this.context.__Messenger.targets[u].send(a()(e))},getUnreadMsgCount:function(e){return r.callbackHandler("GET_UNREAD_MSG_COUNT",e),this.messengerSender({action:"GET_UNREAD_MSG_COUNT",result:{count:e&&e.count||30}},!0),this},getRecentContact:function(e){return r.callbackHandler("GET_RECENT_CONTACT_NEW",e),this.messengerSender({action:"GET_RECENT_CONTACT_NEW",result:{count:e&&e.count||30}},!0),this},startListenAllMsg:function(){if(!this.__IsLogin)throw new Error("未登录");var e=this;return this.__IsStartListen||(this.__IsStartListen=!0,this.messengerSender({action:"START_RECEIVE_ALL_MSG"},!0),c.one("STOP_RECEIVE_ALL_MSG",function(){e.__IsStartListen=!1})),this},stopListenAllMsg:function(){return this.__IsStartListen&&(this.__IsStartListen=!1,this.messengerSender({action:"STOP_RECEIVE_ALL_MSG"})),this},getNick:function(e){return e&&e.length>8&&(0==e.indexOf(this.LoginInfo.prefix)||0==e.indexOf(this.LoginInfo.toPrefix))?e.substring(8):e},destroy:function(){n(this.frameObj),this.stopListenAllMsg(),c.fire("$destroy"),this.__IsLogin=!1},getPrefixByAppkey:function(e){return r.checkParam(e,["appkey"]),r.jsonp(o.GET_APP_INFO_URL+"?appkey="+e.appkey,function(t){t.prefix?e.success&&e.success({code:1e3,data:{prefix:t.prefix}}):e.error&&e.error({code:1003,resultText:t.errmsg})},function(t){e.error&&e.error(t)}),this},__setLoginInfo:function(){this.messengerSender({action:"SET_LOGIN_INFO",result:{appkey:this.LoginInfo.appkey,uid:this.LoginInfo.uid}})}},e.WSDKMods.Base=t}(this),function(e){function t(e){this.init(e)}function i(t,i){e.online&&(n=e.online),e.online=[],r.getScript(d+"?"+r.param({uids:t,charset:i.charset||"utf-8",beginnum:0}),function(){i.success&&i.success({code:1e3,resultText:l[1e3],data:{status:e.online}}),n&&(e.online=n),n=null},function(){i.error&&i.error({code:1005,resultText:l[1005]})})}var n,r=e.WSDKUtil,o=r.Event,s=e.WSDKCons,l=s.CODE,d=s.GET_USER_STATUS_URL;!e.WSDKMods&&(e.WSDKMods={}),t.prototype={constructor:t,init:function(e){this.Base=e.Base,this.messengerSender=e.Base.messengerSender,this.__events()},__events:function(){var e=this;o.on("$destroy",function(){e.stopListenMsg()})},sendMsg:function(e){return r.checkParam(e,["touid","msg"]),r.callbackHandler("CHAT_SEND_MSG",e),this.messengerSender.call(this.Base,{action:"CHAT_SEND_MSG",result:{touid:e.touid,msg:e.msg,msgId:e.msgId,msgType:e.msgType||0,hasPrefix:!!e.hasPrefix,extinfo:e.extinfo||{}}},!0),this},sendCustomMsg:function(e){return r.checkParam(e,["touid","msg"]),r.callbackHandler("CHAT_SEND_CUSTOM_MSG",e),this.messengerSender.call(this.Base,{action:"CHAT_SEND_CUSTOM_MSG",result:{touid:e.touid,msg:e.msg,msgId:e.msgId,summary:e.summary,hasPrefix:!!e.hasPrefix}},!0),this},sendMsgToCustomService:function(e){return r.checkParam(e,["touid","msg"]),r.callbackHandler("CHAT_SEND_MSG_TO_CUSTOM_SERVICE",e),this.messengerSender.call(this.Base,{action:"CHAT_SEND_MSG_TO_CUSTOM_SERVICE",result:{touid:e.touid,msg:e.msg,msgId:e.msgId,msgType:e.msgType,nocache:e.nocache,groupid:e.groupid,hasPrefix:!!e.hasPrefix}},!0),this},sendCustomData:function(e){return r.checkParam(e,["touid","customData"]),"object"==c()(e.customData)&&(e.customData=a()(e.customData)),r.callbackHandler("CHAT_SEND_CUSTOM_DATA",e),this.messengerSender.call(this.Base,{action:"CHAT_SEND_CUSTOM_DATA",result:{touid:e.touid,msg:e.customData,nocache:e.nocache,groupid:e.groupid,hasPrefix:!!e.hasPrefix,sendMsgToCustomService:e.sendMsgToCustomService}},!0),this},getHistory:function(e){return r.checkParam(e,["touid"]),r.callbackHandler("GET_HISTORY_MSG",e),this.messengerSender.call(this.Base,{action:"GET_HISTORY_MSG",result:{touid:e.touid,count:e.count||20,nextkey:e.nextkey||"",hasPrefix:!!e.hasPrefix,type:1}},!0),this},setReadState:function(e){return r.checkParam(e,["touid"]),r.callbackHandler("CHAT_SET_READ_STATE",e),this.messengerSender.call(this.Base,{action:"CHAT_SET_READ_STATE",result:{touid:e.touid,timestamp:e.timestamp||parseInt(+new Date/1e3),hasPrefix:!!e.hasPrefix}},!0),this},startListenMsg:function(e){r.checkParam(e,["touid"]);var t=this;return this.__IsStartRecv||(this.__IsStartRecv=!0,this.messengerSender.call(this.Base,{action:"CHAT_START_RECEIVE_MSG",result:{touid:e.touid,hasPrefix:!!e.hasPrefix}},!0),o.one("CHAT_STOP_RECEIVE_MSG",function(){t.__IsStartRecv=!1})),this},stopListenMsg:function(){return this.__IsStartRecv&&(this.__IsStartRecv=!1,this.messengerSender({action:"CHAT_STOP_RECEIVE_MSG"})),this},getRealChatId:function(e){return r.checkParam(e,["touid"]),r.callbackHandler("CHAT_GET_REAL_ID",e),this.messengerSender.call(this.Base,{action:"CHAT_GET_REAL_ID",result:{touid:e.touid,nocache:e.nocache,groupid:e.groupid,hasPrefix:!!e.hasPrefix}},!0),this},getUserStatus:function(e){if(r.checkParam(e,["uids"]),!r.isArray(e.uids))throw new Error("uids必须为数组");if(e.uids.length&&e.uids.length>30)throw new Error("一次最多传30个用户id");if(e.hasPrefix)i(e.uids.join(";"),e);else{if(!e.appkey)throw new Error("需要appkey");this.Base.getPrefixByAppkey({appkey:e.appkey,success:function(t){var n=t.data.prefix,r=[];e.uids.forEach(function(e){r.push(n+e)}),i(r.join(";"),e)},error:function(){e.error&&e.error({code:1002,resultText:l[1002]})}})}return this}},e.WSDKMods.Chat=t}(this),function(e){function t(e){this.init(e)}var i=e.WSDKUtil;!e.WSDKMods&&(e.WSDKMods={}),t.prototype={constructor:t,init:function(e){this.Base=e.Base,this.messengerSender=e.Base.messengerSender},sendMsg:function(e){i.checkParam(e,["tid","msg"]),i.callbackHandler("TRIBE_SEND_MSG",e);var t=+new Date;return this.messengerSender.call(this.Base,{action:"TRIBE_SEND_MSG",result:{tid:parseInt(e.tid),msgTime:e.msgTime||parseInt(t/1e3),uuid:t,msgType:e.msgType||0,msg:e.msg}},!0),this},getHistory:function(e){return i.checkParam(e,["tid"]),i.callbackHandler("TRIBE_GET_HISTORY_MSG",e),this.messengerSender.call(this.Base,{action:"TRIBE_GET_HISTORY_MSG",result:{tid:e.tid+"",count:e.count||20,nextkey:e.nextkey||"",type:2}},!0),this},getTribeInfo:function(e){return i.checkParam(e,["tid"]),i.callbackHandler("TRIBE_GET_INTO",e),this.messengerSender.call(this.Base,{action:"TRIBE_GET_INTO",result:{tid:parseInt(e.tid),excludeFlag:e.excludeFlag||0}},!0),this},getTribeList:function(e){return i.callbackHandler("TRIBE_GET_LIST",e),this.messengerSender.call(this.Base,{action:"TRIBE_GET_LIST",result:{tribeTypes:e.types||[0,1,2]}},!0),this},getTribeMembers:function(e){return i.checkParam(e,["tid"]),i.callbackHandler("TRIBE_GET_MEMBERS",e),this.messengerSender.call(this.Base,{action:"TRIBE_GET_MEMBERS",result:{tid:parseInt(e.tid)}},!0),this},responseInviteIntoTribe:function(e){return i.checkParam(e,["tid","validatecode","manager","recommender"]),i.callbackHandler("TRIBE_RESPONSE_INVITE",e),this.messengerSender.call(this.Base,{action:"TRIBE_RESPONSE_INVITE",result:{tid:parseInt(e.tid),recommender:e.recommender,validatecode:e.validatecode,manager:e.manager}},!0),this}},e.WSDKMods.Tribe=t}(this),function(t,n){void 0!==e&&e.exports?e.exports=n():"function"==typeof define&&(i("nErl")||define.cmd)?define(n):t.WSDK=n.call(t)}(this,function(){function e(t){return this instanceof e?this.init(t):new e}var t=this.WSDKMods,i=this.WSDKCons,n=this.WSDKUtil,r=this.WSDKPlgs,o=i.PROJECT_NAME,a=i.CUSTOM_PAGE;return e.version="2.1.5",e.prototype={constructor:e,init:function(e){return this.__Messenger=new Messenger(a,o),this.Event=n.Event,this.Base=new t.Base(this,e),this.Chat=new t.Chat(this),t.Tribe&&(this.Tribe=new t.Tribe(this)),this.Plugin={},this.Plugin.Uploader=new r.Uploader(this),this.Plugin.Image=new r.ImgUp(this),this.Plugin.Emot=new r.Emot(this),this},LoginInfo:{}},e}),function(e){Array.prototype.forEach||(Array.prototype.forEach=function(e){if(!e)return!1;for(var t=0,i=this.length;i>t;t++)e(this[t],t,this)}),e.util={unparam:function(e){var t,i={};e&&e.split("&").forEach(function(e){t=e.split("="),i[t[0]]=decodeURIComponent(t[1])});return i},getMyScriptSrc:function(e){for(var t=document.getElementsByTagName("script"),i=t.length,n=0,r="",o=!1;i>n;n++)if((r=t[n].src)&&r.indexOf(e)>-1){o=!0;break}return!o&&(r=""),r},isMobile:function(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],i=t.length,n=!1,r=0;i>r;r++)if(e.toLocaleUpperCase().indexOf(t[r].toUpperCase())>0){n=!0;break}return n},loadScript:function(e,t,i){var n=document.createElement("script"),r=document.getElementsByTagName("head")[0],o=!1;n.onload=function(){o||(o=!0,n.onload=null,n.onreadystatechange=null,t&&t.call(i))},n.onreadystatechange=function(){("loaded"==this.readyState||"complete"==this.readyState)&&t&&t.call(i)},n.setAttribute("charset","utf-8"),n.type="text/javascript",n.src=e,r.insertBefore(n,r.firstChild)},merge:function(){for(var e,t={},i=0,n=arguments.length;n>i;i++)for(e in arguments[i])if(arguments[i].hasOwnProperty(e)){var r=arguments[i][e];""!==r&&null!==r&&void 0!==r&&(t[e]=r)}return t}}}(window.WKIT||(window.WKIT={})),function(e){var t=window.__DEBUG||!1,i="0.4.0",n="https://"+(window.__DEBUG?"g-assets.daily.taobao.net":"g.alicdn.com"),r="/aliww/h5.openim.kit/",o={uid:"",touid:"",appkey:"",credential:"",container:null,width:0,height:0,autoMsg:"",autoMsgType:0,titleBar:!0,title:"",onBack:null,placeholder:"说点什么吧...",logo:"",avatar:"https://img.alicdn.com/tps/TB1BsZ6JpXXXXaZXpXXXXXXXXXX-81-81.png",toAvatar:"https://gw.alicdn.com/tps/TB10C4vKXXXXXa_aXXXXXXXXXXX-420-420.jpg_200x200.jpg",theme:"",themeColor:"",themeBgColor:"",msgColor:"",msgBgColor:"",pluginUrl:"",customUrl:"",sendMsgToCustomService:!1,groupId:"",onLoginSuccess:null,onLoginError:null,imgUploader:!0,beforeImageUploaderTrigger:null,onUploaderSuccess:null,onUploaderError:null,onMsgReceived:function(){},onMsgSent:function(){},customData:null,sendBtnText:"发送",imageZoom:!1,beforeMsgSend:null},a=e.util,s=[],c=!1,l=!1,d=function(){l=!0,c&&(s.forEach(function(e){e()}),s=[])};e.version=i,e.init=function(t){if(c=!0,!(t&&t.uid&&t.touid&&t.appkey&&t.credential))throw new Error('传入的参数必须包含以下字段{uid: "", appkey: "", credential: "", touid: ""}');t.uid=t.uid.toLowerCase(),t.touid=t.touid.toLowerCase();var i=a.merge(o,t);this.waitUntilBoot(function(){e.start(i)})},e.sendMsg=function(t){if(!c)throw new Error("请先调用WKIT.init");e.Chat&&e.Chat.sendMsg({msg:t.msg,msgType:t.type})},e.resize=function(t){if(e.UI){var i=e.UI.Window.resize(t);e.UI.Plugin&&e.UI.Plugin.resize({iWidth:i.wh.left[0],iHeight:i.wh.left[1]}),e.UI.Chat&&e.UI.Chat.resize({iWidth:i.wh.middle[0],iHeight:i.wh.middle[1]}),e.UI.Custom&&e.UI.Custom.resize({iWidth:i.wh.right[0],iHeight:i.wh.right[1]})}},e.destroy=function(){e.Plugin&&e.Plugin.destroy(),e.Chat&&e.Chat.destroy(),e.UI.Custom&&e.UI.Custom.destroy(),e.UI.Window&&e.UI.Window.destroy()},e.waitUntilBoot=function(e){e&&(l?e.call(this):s.push(e))},e.switchTouid=function(t){e.Chat&&e.Chat.switchTouid(t)},function(){var e=a.getMyScriptSrc("h5.openim.kit/"+i+"/scripts/kit").split("?"),o=a.unparam(e[e.length-1]),s=n+r+i+"/scripts/",c=t?".debug":"";o.mobile?a.loadScript(s+"mkit"+c+".js",d):o.pc?a.loadScript(s+"pckit"+c+".js",d):a.isMobile()?a.loadScript(s+"mkit"+c+".js",d):a.loadScript(s+"pckit"+c+".js",d)}()}(window.WKIT||(window.WKIT={}))}).call(t,i("f1Eh")(e))},vpCD:function(e,t){}});
//# sourceMappingURL=15.32e638a298a8721d812d.js.map